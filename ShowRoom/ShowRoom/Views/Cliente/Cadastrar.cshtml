@model ShowRoomModelo.model.cadastros.Cliente
@using ShowRoom.App_Helpers.Componentes

@{
    ViewBag.Title = "Cadastro de Cliente";
    ViewBag.SubTitle = "Cadastro de Cliente";
    ViewBag.LinkText = "Consultar";
    ViewBag.ActionName = "Consultar";
}

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })

        <div class="form-row">

            <div class="col-md-3 mb-3">
                @Html.LabelFor(model => model.cnpj, htmlAttributes: new { @class = "control-label" })
                @Html.TextBoxFor(model => model.cnpj, htmlAttributes: new { @onkeypress = "mascaraCC(this,CC)", @maxlength = "18", @class = "form-control", @autofocus = "autofocus" })
                @Html.ValidationMessageFor(model => model.cnpj, "", new { @class = "text-danger" })
            </div>

            <div class="col-md-2 mb-2">
                @Html.LabelFor(model => model.ie, htmlAttributes: new { @class = "control-label" })
                @Html.TextBoxFor(model => model.ie, htmlAttributes: new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.ie, "", new { @class = "text-danger" })
            </div>

            <div class="col-md-3 mb-3">
                <label class="" for="Status">Status</label>
                <select id="status" name="status" class="form-control" style="width:100%;border: 1px solid #d2d2d2;box-shadow: 0 1px 0 0 #d2d2d2;border-radius: 5px;">
                    <option value="0">INATIVO</option>
                    <option value="1" selected>ATIVO</option>
                </select>
            </div>
        </div>

        <div class="form-row">
            <div class="col-md-10 mb-10">
                @Html.LabelFor(model => model.razao, htmlAttributes: new { @class = "control-label" })
                @Html.TextBoxFor(model => model.razao, new { @maxlength = "100", @class = "form-control" })
                @Html.ValidationMessageFor(model => model.razao, "", new { @class = "text-danger" })
            </div>

            <div class="col-md-2 mb-2">
                @Html.LabelFor(model => model.fundacao, htmlAttributes: new { @class = "control-label" })
                @Html.TextBox("fundacao", "", new { @maxlength = "10", @data_dateformat = "dd/mm/yy", @onkeypress = "mascaraDT(this, DATA)", @autocomplete = "off", @placeholder = "DD/MM/YYYY", @filtrar = "", @onclick = "this.focus();this.select()", @class = "form-control date datepicker" })
                @Html.ValidationMessageFor(model => model.fundacao, "", new { @class = "text-danger" })
           </div>


        </div>

        <div class="form-row">

            <div class="col-md-6 mb-6">
                @Html.LabelFor(model => model.email, htmlAttributes: new { @class = "control-label" })
                @Html.TextBoxFor(model => model.email, new { @maxlength = "60", @class = "form-control", @type = "email" })
                @Html.ValidationMessageFor(model => model.email, "", new { @class = "text-danger" })
            </div>
            <div class="col-md-6 mb-6">
                @Html.LabelFor(model => model.email2, htmlAttributes: new { @class = "control-label" })
                @Html.TextBoxFor(model => model.email2, new { @maxlength = "60", @class = "form-control", @type = "email" })
                @Html.ValidationMessageFor(model => model.email2, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-row">
            <div class="col-md-3 mb-3">
                @Html.LabelFor(model => model.fone1, htmlAttributes: new { @class = "control-label" })
                @Html.TextBoxFor(model => model.fone1, new { @onkeypress = "mascaraFONE(this,FONE)", @maxlength = "15", @class = "form-control", @placeholder = "(XX) XXXX-XXXX" })
                @Html.ValidationMessageFor(model => model.fone1, "", new { @class = "text-danger" })
            </div>

            <div class="col-md-3 mb-3">
                @Html.LabelFor(model => model.fone2, htmlAttributes: new { @class = "control-label" })
                @Html.TextBoxFor(model => model.fone2, new { @onkeypress = "mascaraFONE(this,FONE)", @maxlength = "15", @class = "form-control", @placeholder = "(XX) XXXX-XXXX" })
                @Html.ValidationMessageFor(model => model.fone2, "", new { @class = "text-danger" })
            </div>

            <div class="col-md-6 mb-6">
                @Html.LabelFor(model => model.contato, htmlAttributes: new { @class = "control-label" })
                @Html.TextBoxFor(model => model.contato, new { @maxlength = "60", @class = "form-control" })
                @Html.ValidationMessageFor(model => model.contato, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-row">
            <div class="col-md-3 mb-3">
                @Html.LabelFor(model => model.facebook, htmlAttributes: new { @class = "control-label" })
                @Html.TextBoxFor(model => model.facebook, new { @maxlength = "200", @class = "form-control" })
                @Html.ValidationMessageFor(model => model.facebook, "", new { @class = "text-danger" })
            </div>

            <div class="col-md-3 mb-3">
                @Html.LabelFor(model => model.instagram, htmlAttributes: new { @class = "control-label" })
                @Html.TextBoxFor(model => model.instagram, new { @maxlength = "200", @class = "form-control" })
                @Html.ValidationMessageFor(model => model.instagram, "", new { @class = "text-danger" })
            </div>

            <div class="col-md-6 mb-6">
                @Html.LabelFor(model => model.www, htmlAttributes: new { @class = "control-label" })
                @Html.TextBoxFor(model => model.www, new { @maxlength = "200", @class = "form-control" })
                @Html.ValidationMessageFor(model => model.www, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-row">

            <div class="col-md-4 mb-4">
                <label class="" for="Cidade">Cidade</label>
                <select id="Cidade" name="Cidade" class="form-control" style="width:100%">
                    @if (!Equals(Model.nm_cidade, "") && (!(Model.cidade == 0)))
                    {
                        <option value="@Model.cidade">@Model.nm_cidade</option>
                    }
                </select>
            </div>

            <div class="col-md-2 mb-2">
                @Html.LabelFor(model => model.cep, htmlAttributes: new { @class = "control-label" })
                @Html.TextBoxFor(model => model.cep, new { @maxlength = "9", @class = "form-control", @onkeypress = "mascaraCEP(this,CEP)" })
                @Html.ValidationMessageFor(model => model.cep, "", new { @class = "text-danger" })
            </div>

            <div class="col-md-6 mb-6">
                @Html.LabelFor(model => model.bairro, htmlAttributes: new { @class = "control-label" })
                @Html.TextBoxFor(model => model.bairro, new { @maxlength = "30", @class = "form-control" })
                @Html.ValidationMessageFor(model => model.bairro, "", new { @class = "text-danger" })
            </div>

            <!--  <div class="col col-sm-12 col-md-12 col-lg-12">
                <h4 class="subtitulo-form">Endereço Completo</h4>
            </div> -->

        </div>

        <div class="form-row">
            <div class="col-md-6 mb-6">
                @Html.LabelFor(model => model.endereco, htmlAttributes: new { @class = "control-label" })
                @Html.TextBoxFor(model => model.endereco, new { @maxlength = "100", @class = "form-control" })
                @Html.ValidationMessageFor(model => model.endereco, "", new { @class = "text-danger" })
            </div>
            <div class="col-md-3 mb-3">
                @Html.LabelFor(model => model.corredor, htmlAttributes: new { @class = "control-label" })
                @Html.TextBoxFor(model => model.corredor, new { @maxlength = "10", @class = "form-control" })
                @Html.ValidationMessageFor(model => model.corredor, "", new { @class = "text-danger" })
            </div>
            <div class="col-md-3 mb-3">
                @Html.LabelFor(model => model.numero, htmlAttributes: new { @class = "control-label" })
                @Html.TextBoxFor(model => model.numero, new { @maxlength = "10", @class = "form-control" })
                @Html.ValidationMessageFor(model => model.numero, "", new { @class = "text-danger" })
            </div>

            
        </div>

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Salvar" class="btn btn-default" />
            </div>
        </div>

    </div>

}

@section Scripts {
    @{ /* Scripts.Render("~/bundles/jqueryval") */ }



    <script src="~/scripts/terceiros/data.js" type="text/javascript"></script>
    <script src="~/scripts/terceiros/cpfcnpj.js" type="text/javascript"></script>
    <script src="~/scripts/terceiros/telefone.js" type="text/javascript"></script>

    <script type="text/javascript">

        $(document).ready(function () {

            var Url = '@Url.Action("GetCidades", "Cidade")';
            $("#Cidade").select2({
                placeholder: "Selecione uma cidade",
                minimumInputLength: 0,
                language: "pt-BR",
                ajax: {
                    dataType: "json",
                    url: Url,
                    data: function (params) {
                        return {
                            term: params.term // search term
                        };
                    },
                    processResults: function (data) {
                        return {
                            results: $.map(data, function (obj) {
                                return { id: obj.id, text: obj.text };
                            })
                        };
                    },
                    cache: true
                }
            });

            $("#cep").change(function () {
                var cep = $("#cep").val();
                var url = "http://api.postmon.com.br/v1/cep/" + cep;
                $.getJSON(url, function (result) {
                    //Se deu certo
                    $("#bairro").val(result["bairro"]);
                    $("#endereco").val(result['logradouro']);
                    $("#numero").focus();
                });
            });
        });

    </script>
}
